<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Pharmacy Facts Slider</title>
  <style>
    :root{
      /* Theme: set to light red; swap back to your blues if desired */
      --card-bg:#fde2e4;   /* was #dbeef6 */
      --page-bg:#fff5f5;   /* was #f8fafc */
      --text:#0f172a;
      --muted:#334155;
      --radius:20px;
      --shadow:0 10px 20px rgba(0,0,0,.08);
      --dot:#fecdd3;       /* inactive dots */
      --dot-active:#e11d48;/* active dot (was #3a889e) */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Helvetica,Arial;
      background:var(--page-bg);
      color:var(--text);
      min-height:100vh;
      display:flex;align-items:center;justify-content:center;
    }
    .testimonial-wrap{
      width:min(900px,92vw);
      padding:24px 12px 12px;
      margin:auto;
    }

    /* Allow vertical scroll while we handle horizontal swipe */
    #slides{ touch-action:pan-y; }

    .slide{
      display:grid;
      gap:16px; /* was 18px */
      background:var(--card-bg);
      border-radius:var(--radius);
      padding:28px;
      box-shadow:var(--shadow);
      max-width:800px;   /* guardrail on very wide screens */
      margin:0 auto;
      overflow-wrap:break-word;
      word-break:break-word;
      hyphens:auto;
    }

    blockquote{
      margin:0;
      font-size:clamp(16px,4.8vw,26px); /* more fluid on phones */
      line-height:1.45;
      font-weight:500;
    }
    figcaption{
      display:flex;
      gap:8px;
      align-items:center;
      font-size:clamp(13px,3.6vw,16px); /* slightly smaller min for phones */
      color:var(--muted);
      overflow-wrap:break-word;
      word-break:break-word;
      hyphens:auto;
    }
    .name{font-weight:600;color:var(--text)}

    .dots{
      display:flex;justify-content:center;gap:10px;padding:18px 0 4px
    }
    .dots button{
      width:10px;height:10px;border-radius:999px;border:0;outline:0;
      background:var(--dot);cursor:pointer;transition:transform .2s, background .2s
    }
    .dots button[aria-selected="true"]{background:var(--dot-active);transform:scale(1.15)}

    /* Mobile adjustments */
    @media (max-width:640px){
      .testimonial-wrap{ width:min(560px,94vw); padding:16px 8px 8px; }
      .slide{ padding:18px; border-radius:16px; gap:12px; }
      .dots{ gap:12px; padding:16px 0 2px; }
      .dots button{ width:12px; height:12px; } /* larger tap target */
    }

    /* Very small devices */
    @media (max-width:360px){
      .slide{ padding:14px; border-radius:14px; }
      blockquote{ font-size:clamp(15px,5.2vw,22px); }
      figcaption{ font-size:clamp(12px,3.8vw,15px); }
      /* Optional space saver:
      figcaption div:last-child{ display:none; } */
    }
  </style>
</head>
<body>
  <div class="testimonial-wrap" role="region" aria-label="Pharmacy Facts">
    <div id="slides">
      <!-- Your original data is preserved below -->
      <figure class="slide" data-quote="Bioavailability (F) is the fraction of an administered dose that reaches systemic circulation unchanged." data-name="Pharmaceutics Fact" data-role="Rowland & Tozer"></figure>
      <figure class="slide" data-quote="Loading Dose = (Target Concentration × Volume of Distribution) ÷ Bioavailability." data-name="Clinical Pharmacokinetics" data-role="Brahmankar & Jaiswal"></figure>
      <figure class="slide" data-quote="Half-life (t½) = 0.693 × Volume of Distribution ÷ Clearance." data-name="Pharmacokinetics Formula" data-role="Milo Gibaldi"></figure>
      <figure class="slide" data-quote="First-pass metabolism significantly reduces the bioavailability of drugs like propranolol and nitroglycerin." data-name="Drug Metabolism" data-role="Swarbrick"></figure>
      <figure class="slide" data-quote="Therapeutic Drug Monitoring is essential for narrow therapeutic index drugs such as digoxin, lithium, and phenytoin." data-name="Clinical Pharmacy" data-role="Goodman & Gilman"></figure>
    </div>
    <div class="dots" id="dots" role="tablist" aria-label="Slider pagination"></div>
  </div>
  <script>
    (function(){
      const slidesEl = document.getElementById('slides');
      const dotsEl = document.getElementById('dots');
      const slides = Array.from(slidesEl.querySelectorAll('.slide'));
      let index = 0, timer = null;

      function render(i){
        const s = slides[i];
        slidesEl.innerHTML = '';
        const fig = document.createElement('figure');
        fig.className = 'slide';
        const bq = document.createElement('blockquote');
        bq.textContent = '“' + s.dataset.quote + '”';
        const cap = document.createElement('figcaption');
        const name = document.createElement('div');
        name.className = 'name';
        name.textContent = s.dataset.name;
        const role = document.createElement('div');
        role.textContent = ' · ' + s.dataset.role;
        cap.appendChild(name); cap.appendChild(role);
        fig.appendChild(bq); fig.appendChild(cap);
        slidesEl.appendChild(fig);
        Array.from(dotsEl.children).forEach((d,di)=>d.setAttribute('aria-selected', di===i ? 'true':'false'));
      }
      function goTo(i){ index = (i + slides.length) % slides.length; render(index); reset(); }
      function next(){ goTo(index + 1); }
      function reset(){ if(timer) clearInterval(timer); timer = setInterval(next, 5000); }

      // Build dots
      slides.forEach((_,i)=>{
        const b=document.createElement('button');
        b.setAttribute('aria-label','Go to slide '+(i+1));
        b.setAttribute('role','tab');
        b.addEventListener('click',()=>goTo(i));
        dotsEl.appendChild(b);
      });

      // Improved swipe for touch (prevents accidental selections)
      let startX=null, tracking=false;
      slidesEl.addEventListener('pointerdown',e=>{
        startX=e.clientX; tracking=true; slidesEl.setPointerCapture?.(e.pointerId);
      });
      slidesEl.addEventListener('pointermove',e=>{
        if(!tracking || startX===null) return;
        const dx=e.clientX-startX;
        if(Math.abs(dx)>10) e.preventDefault();
      });
      slidesEl.addEventListener('pointerup',e=>{
        if(startX===null) return;
        const dx=e.clientX-startX;
        if(Math.abs(dx)>40){ dx<0?next():goTo(index-1) }
        startX=null; tracking=false;
      });

      slidesEl.addEventListener('mouseenter',()=>clearInterval(timer));
      slidesEl.addEventListener('mouseleave',reset);

      render(index); reset();
    })();
  </script>
</body>
</html>
